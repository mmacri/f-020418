
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Recovery Essentials</title>
    <meta name="description" content="Find the best recovery equipment with expert reviews and comparisons" />
    <meta name="author" content="Recovery Essentials" />
    
    <!-- Security headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <!-- Updated CSP to include all necessary domains -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src * data:; style-src 'self' 'unsafe-inline'; script-src 'self' https://cdn.gpteng.co https://polyfill.io https://cdnjs.cloudflare.com https://static.cloudflareinsights.com 'unsafe-inline';" />
    
    <!-- Cache control - using meta tag since we can't directly modify HTTP headers -->
    <meta http-equiv="Cache-Control" content="max-age=31536000, immutable" />
    
    <!-- Open Graph tags -->
    <meta property="og:title" content="Recovery Essentials - Best Recovery Equipment" />
    <meta property="og:description" content="Find the best recovery equipment with our expert reviews and comparisons" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://recoveryessentials.com/opengraph-image.png" />

    <!-- Twitter card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@recovery_essentials" />
    <meta name="twitter:image" content="https://recoveryessentials.com/opengraph-image.png" />
    
    <!-- IE compatibility -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    
    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://cdn.gpteng.co" />
    <link rel="preconnect" href="https://polyfill.io" />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" />
    <link rel="preconnect" href="https://static.cloudflareinsights.com" />
    
    <!-- Polyfill for older browsers - updated to use polyfill.io instead of cdnjs -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default,Array.prototype.find,IntersectionObserver,Promise,fetch,Object.assign,CustomEvent,Symbol,URL,Element.prototype.classList"></script>
    
    <!-- Shim for ES modules in older browsers -->
    <script>
      (function() {
        // Check if browser supports ES modules
        var supportsES6 = function() {
          try { eval('var foo = (x)=>x+1'); return true; }
          catch(e) { return false; }
        }();
        
        // Add no-js class and remove it when JS is available
        document.documentElement.classList.add('no-js');
        document.documentElement.classList.remove('no-js');
        
        // Add IE detection
        if (/*@cc_on!@*/false || !!document.documentMode) {
          document.documentElement.classList.add('is-ie');
        }
        
        // Add module/nomodule support detection
        document.documentElement.classList.add(supportsES6 ? 'esm' : 'no-esm');
      })();
    </script>
    
    <!-- For internet explorer - favicon with error handling -->
    <link rel="shortcut icon" href="/favicon.ico" onerror="this.href='/placeholder.svg'" />
    
    <!-- Global error handler for unhandled Promise rejections -->
    <script>
      window.addEventListener('unhandledrejection', function(event) {
        console.warn('Unhandled Promise rejection:', event.reason);
        // Prevent the error from being shown to the user
        event.preventDefault();
      });
      
      // Handle general errors
      window.addEventListener('error', function(event) {
        console.warn('Captured error:', event.message);
        // This helps prevent white screens on uncaught errors
        if (event.error && event.error.stack) {
          console.warn('Error stack:', event.error.stack);
        }
      });
    </script>
  </head>

  <body>
    <div id="root"></div>
    <!-- Lovable script with both module and fallback versions -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script nomodule>
      // Fallback for browsers that don't support ES modules
      document.write('<script src="https://cdn.gpteng.co/gptengineer-legacy.js"><\/script>');
    </script>
    <script type="module" src="/src/main.tsx"></script>
    <script nomodule src="/src/legacy-entry.js"></script>
    
    <!-- Add a fallback for browsers without module support -->
    <script>
      // Check if the browser supports modules
      var supportsModules = 'noModule' in document.createElement('script');
      
      if (!supportsModules) {
        // Create a fallback script for older browsers
        var fallbackScript = document.createElement('script');
        fallbackScript.src = '/src/legacy-entry.js';
        document.body.appendChild(fallbackScript);
      }
    </script>
  </body>
</html>
